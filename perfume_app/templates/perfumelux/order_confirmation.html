{% extends 'perfumelux/base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <div class="neu-outset" style="padding: 40px; border-radius: 20px; text-align: center; margin-bottom: 30px;">
        <div style="font-size: 80px; margin-bottom: 20px; color: var(--success-color);">‚úÖ</div>
        <h1 style="margin-bottom: 15px;">Order Confirmed!</h1>
        <p style="font-size: 18px; margin-bottom: 25px; color: #666;">Thank you for your purchase. Your order has been successfully placed.</p>

        <div style="background: var(--secondary-color); padding: 20px; border-radius: 15px; margin-bottom: 30px; display: inline-block;">
            <p style="margin-bottom: 10px;">Order Number: <strong>#{{ order.id }}</strong></p>
            <p style="margin-bottom: 10px;">Order Total: <strong>${{ order.total_price }}</strong></p>
            <p>Order Date: <strong>{{ order.created_at|date:"F j, Y" }}</strong></p>
        </div>

        <p style="margin-bottom: 30px; color: #666;">A confirmation email has been sent to <strong>{{ order.email }}</strong></p>

        <div style="display: flex; gap: 15px; justify-content: center;">
            <a href="{% url 'order_detail' order.id %}" class="btn-primary">View Order Details</a>
            <a href="{% url 'product_list' %}" class="btn-neu">Continue Shopping</a>
        </div>
    </div>

    <!-- Order Summary -->
    <div class="neu-outset" style="padding: 30px; border-radius: 20px; margin-bottom: 30px;">
        <h2 style="margin-bottom: 25px;">Order Summary</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
            <!-- Shipping Information -->
            <div>
                <h3 style="margin-bottom: 15px;">Shipping Address</h3>
                <div class="neu-inset" style="padding: 20px; border-radius: 15px;">
                    <p><strong>{{ order.first_name }} {{ order.last_name }}</strong></p>
                    <p>{{ order.address }}</p>
                    <p>{{ order.city }}, {{ order.state }} {{ order.zip_code }}</p>
                    <p>{{ order.country }}</p>
                    <p style="margin-top: 15px;">üìû {{ order.phone }}</p>
                    <p>üìß {{ order.email }}</p>
                </div>
            </div>

            <!-- Order Details -->
            <div>
                <h3 style="margin-bottom: 15px;">Order Details</h3>
                <div class="neu-inset" style="padding: 20px; border-radius: 15px;">
                    {% for item in order.orderitem_set.all %}
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--secondary-color);">
                        <div>
                            <p style="font-weight: 600; margin-bottom: 5px;">{{ item.product.name }}</p>
                            <p style="color: #666;">Qty: {{ item.quantity }}</p>
                        </div>
                        <p style="font-weight: 700; color: var(--accent-color);">${{ item.get_total }}</p>
                    </div>
                    {% endfor %}

                    <div style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Subtotal:</span>
                            <span>${{ order.total_price }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Shipping:</span>
                            <span>$10.00</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Tax:</span>
                            <span>${{ order.get_tax|default:"0.00" }}</span>
                        </div>
                        <hr style="border: none; border-top: 1px solid var(--secondary-color); margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 18px;">
                            <span>Total:</span>
                            <span>${{ order.get_total_with_tax|default:order.total }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- What's Next -->
    <div class="neu-outset" style="padding: 30px; border-radius: 20px;">
        <h2 style="margin-bottom: 25px; text-align: center;">What's Next?</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
            <div class="neu-inset" style="padding: 20px; border-radius: 15px; text-align: center;">
                <div style="font-size: 40px; margin-bottom: 15px;">üì¶</div>
                <h3 style="margin-bottom: 10px;">Order Processing</h3>
                <p style="color: #666;">Your order is being processed and will be shipped within 1-2 business days.</p>
            </div>

            <div class="neu-inset" style="padding: 20px; border-radius: 15px; text-align: center;">
                <div style="font-size: 40px; margin-bottom: 15px;">üì¨</div>
                <h3 style="margin-bottom: 10px;">Shipping Updates</h3>
                <p style="color: #666;">You'll receive email updates with tracking information once your order ships.</p>
            </div>

            <div class="neu-inset" style="padding: 20px; border-radius: 15px; text-align: center;">
                <div style="font-size: 40px; margin-bottom: 15px;">‚è∞</div>
                <h3 style="margin-bottom: 10px;">Delivery Time</h3>
                <p style="color: #666;">Expected delivery within 3-5 business days after shipping.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
